<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Andrea Ã¨ leso?</title>

<style>
body {
    margin: 0;
    height: 100vh;
    background: black;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-family: Arial, sans-serif;
    color: white;
    overflow: hidden;
}

video {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1;
    opacity: 0.3;
}

h1 {
    font-size: 3rem;
    margin-bottom: 30px;
    text-align: center;
    transition: 0.3s;
}

.arena {
    position: relative;
    width: 90vw;
    max-width: 800px;
    height: 50vh;
    max-height: 400px;
    border-radius: 20px;
    background: rgba(0,0,0,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

button {
    padding: 15px 40px;
    font-size: 1.5rem;
    border: none;
    border-radius: 15px;
    cursor: pointer;
    transition: 0.2s;
}

#yesBtn {
    background: red;
    color: white;
}

#noBtn {
    background: gray;
    color: white;
    position: absolute;
}

.explode {
    animation: boom 0.4s infinite alternate;
}

@keyframes boom {
    from { transform: scale(1); }
    to { transform: scale(1.15); color: yellow; }
}
</style>
</head>

<body>

<video autoplay muted loop>
    <source src="video.mp4" type="video/mp4">
</video>

<h1 id="question">Andrea Ã¨ leso?</h1>

<div class="arena" id="arena">
    <button id="yesBtn">Leso</button>
    <button id="noBtn">No</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
let level = 0;
let noScale = 1;

const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const question = document.getElementById("question");
const arena = document.getElementById("arena");

const fartSound = new Audio("scoreggia.mp3");
const scareSound = new Audio("fah.mp3");

const levels = [
    "Leso",
    "LESSISSIMO",
    "SUPER LESO",
    "ULTRA LESO",
    "MEGA LESISSIMO",
    "LESISSIMO SUPREMO DEFINITIVO"
];

function explodeConfetti() {
    const duration = 2000;
    const end = Date.now() + duration;

    (function frame() {
        confetti({
            particleCount: 6,
            angle: 60,
            spread: 70,
            origin: { x: 0 }
        });
        confetti({
            particleCount: 6,
            angle: 120,
            spread: 70,
            origin: { x: 1 }
        });

        if (Date.now() < end) {
            requestAnimationFrame(frame);
        }
    })();
}

function randomPosition() {
    const arenaRect = arena.getBoundingClientRect();
    const btnRect = noBtn.getBoundingClientRect();

    const maxX = arenaRect.width - btnRect.width;
    const maxY = arenaRect.height - btnRect.height;

    const x = Math.random() * maxX;
    const y = Math.random() * maxY;

    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
}

function moveNo() {
    noScale -= 0.1;
    if (noScale < 0.1) noScale = 0.1;

    noBtn.style.transform = `scale(${noScale})`;

    if (level < levels.length - 1) {
        level++;
        yesBtn.textContent = levels[level];
    }

    scareSound.currentTime = 0;
    scareSound.play();

    randomPosition();
}

noBtn.addEventListener("mouseenter", moveNo);
noBtn.addEventListener("touchstart", (e) => {
    e.preventDefault();
    moveNo();
}, { passive:false });

yesBtn.addEventListener("click", () => {
    question.textContent = "LA VERITÃ€ Ãˆ STATA ACCETTATA ðŸ˜ˆðŸ”¥";
    question.classList.add("explode");

    fartSound.currentTime = 0;
    fartSound.play();

    explodeConfetti();
});

window.addEventListener("load", randomPosition);
window.addEventListener("resize", randomPosition);
</script>

</body>
</html>